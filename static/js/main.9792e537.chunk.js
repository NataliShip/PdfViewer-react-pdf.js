(this["webpackJsonppdf-viewer"]=this["webpackJsonppdf-viewer"]||[]).push([[0],{131:function(e,t,n){e.exports=n(273)},140:function(e,t){},141:function(e,t){},142:function(e,t){},143:function(e,t){},144:function(e,t){},227:function(e,t){},254:function(e,t){},257:function(e,t){},258:function(e,t){},259:function(e,t){},271:function(e,t,n){},272:function(e,t,n){},273:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(126),o=n.n(i),c=n(3),s=n.n(c),l=n(50),u=n(51),d=n(54),f=n(53),h=n(52),p=n(55),g=n(35),m=n.n(g),v=n(127),w=n.n(v),E=n(128),C=n(78),b=n(49),P=n.n(b),x=n(56),S=n.n(x),L=n(130),N=n(129),y=n.n(N),k=(n(271),function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(d.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(i)))).state={error:null,isLoading:!1},n.input=r.a.createRef(),n.onChangeHandler=function(e){var t=n.props,a=t.afterUploadAction,r=t.maxSizeInKB,i=e.target.files[0],o=i.type,c=new FileReader;if(e.target.accept.indexOf(o)<0)return n.setState({error:"\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u0442\u0438\u043f \u0444\u0430\u0439\u043b\u0430",isLoading:!1}),!1;var s=i.size/1024;if(r&&s>r)return n.setState({error:"\u0421\u043b\u0438\u0448\u043a\u043e\u043c \u0431\u043e\u043b\u044c\u0448\u043e\u0439 \u0440\u0430\u0437\u043c\u0435\u0440 \u0444\u0430\u0439\u043b\u0430",isLoading:!1}),!1;n.setState({error:null,isLoading:!0});var l="application/pdf"===i.type;if(l)return n.setState({error:null,isLoading:!1}),c.onload=function(){a&&a({fileContent:c.result,fileObject:i,isPdf:l})},void c.readAsDataURL(i);c.readAsDataURL(i)},n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.label,a=t.accept,i=this.state,o=i.error,c=i.isLoading;return r.a.createElement("div",{className:"upload"},c?r.a.createElement("span",null,"Downloading..."):r.a.createElement("div",{className:"holder"},r.a.createElement("input",{onChange:this.onChangeHandler,className:"input",accept:a.join(", "),type:"file",ref:this.input}),r.a.createElement("button",{className:"btn",onClick:function(){e.input.current.click()}},n)),o&&r.a.createElement("div",{className:"error"},o))}}]),t}(a.Component));k.defaultProps={label:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c",maxSizeInKB:0};var R=k;n(272);m.a.GlobalWorkerOptions.workerSrc=w.a;var O=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(d.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(i)))).state={pdf:null,testFileContent:null,pagesCount:0,currentPageNumber:1,onCatchErrorReloadedCount:0,switchPageBlocked:!1,scale:1,isPdfLoaded:!1,isShowError:!1,pdfLoadingError:!1},n.isPageRendering=!1,n.wrap=r.a.createRef(),n.document=r.a.createRef(),n.canvas=r.a.createRef(),n.textAndAnnotationLayer=r.a.createRef(),n.throttledChangeDocumentSize=void 0,n.fetchPdf=function(e){var t,a;return s.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t=m.a.getDocument(e),r.next=3,s.a.awrap(t.promise);case 3:a=r.sent,n.setState({pdf:a,isPdfLoaded:!0,pagesCount:a.numPages});case 5:case"end":return r.stop()}}))},n.pageRendering=function(){var e,t,a,r,i,o,c,l,u,d,f,p;return s.a.async((function(g){for(;;)switch(g.prev=g.next){case 0:if(!n.isPageRendering){g.next=2;break}return g.abrupt("return");case 2:if(n.setState({switchPageBlocked:!0}),n.isPageRendering=!0,e=Object(h.a)(n),t=e.state,a=t.currentPageNumber,r=t.pdf){g.next=7;break}return g.abrupt("return");case 7:return g.next=9,s.a.awrap(r.getPage(a));case 9:return i=g.sent,o=n.getScaleForCurrentWidth(i),g.next=13,s.a.awrap(i.getViewport({scale:o}));case 13:return c=g.sent,n.canvas.current.height=c.height,n.canvas.current.width=c.width,l=n.canvas.current.getContext("2d"),u={canvasContext:l,viewport:c},d=i.render(u),g.next=21,s.a.awrap(d.promise);case 21:return g.next=23,s.a.awrap(i.getTextContent());case 23:return f=g.sent,n.textAndAnnotationLayer.current.innerHTML="",m.a.renderTextLayer({textContent:f,container:n.textAndAnnotationLayer.current,viewport:c,textDivs:[]}),g.next=28,s.a.awrap(new C.PDFLinkService({externalLinkTarget:m.a.LinkTarget.BLANK}));case 28:p=g.sent,new E.AnnotationLayerBuilder({pageDiv:n.textAndAnnotationLayer.current,linkService:p,pdfPage:i,l10n:P.a}).render(c),n.setState({switchPageBlocked:!1}),n.isPageRendering=!1;case 33:case"end":return g.stop()}}))},n.switchPageHandler=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=n.state,a=t.currentPageNumber,r=t.pagesCount,i=t.switchPageBlocked;if(!i){var o=e?a+1:a-1;o<1&&(o=1),o>r&&(o=r),n.setState({currentPageNumber:o,switchPageBlocked:a!==o},(function(){return n.pageRendering()}))}},n.toggleFullScreenHandler=function(){var e=n.wrap.current;e&&S.a.toggle(e)},n.afterUpload=function(e){var t=e.fileContent;n.setState({testFileContent:t,pdfLoadingError:!1}),n.fetchPdf(t).then((function(){return n.pageRendering()}))},n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.fetchPdf(this.props.src).then((function(){return e.pageRendering()})).catch((function(){return e.setState({pdfLoadingError:!0})})),this.throttledChangeDocumentSize=y()(this.pageRendering,100),window.addEventListener("resize",this.throttledChangeDocumentSize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.throttledChangeDocumentSize)}},{key:"componentWillReceiveProps",value:function(e){var t=this;e.src!==this.props.src&&(this.setState({isShowError:!1,pdfLoadingError:!1,pdf:null,testFileContent:null,currentPageNumber:1,pagesCount:0}),this.fetchPdf(e.link).then((function(){return t.pageRendering()})).catch((function(){return t.setState({pdfLoadingError:!0})})))}},{key:"componentDidCatch",value:function(){var e=this.state.onCatchErrorReloadedCount;e<2?this.setState({onCatchErrorReloadedCount:e+1}):this.setState({isShowError:!0})}},{key:"getScaleForCurrentWidth",value:function(e){var t=e.getViewport({scale:this.state.scale}),n=this.state.scale;return this.wrap.current.clientWidth===t.width?n:(n=S.a.isFullscreen&&t.width/t.height<1.5?this.wrap.current.clientHeight/t.height*this.state.scale:this.wrap.current.clientWidth/t.width*this.state.scale,this.setState({scale:n}),n)}},{key:"render",value:function(){var e=this,t=this.props,n=t.sandbox,i=t.src,o=this.state,c=o.isShowError,s=o.isPdfLoaded,l=o.pdfLoadingError,u=o.testFileContent,d=o.switchPageBlocked,f=o.pagesCount,h=o.currentPageNumber,p=n?u:i;return c?r.a.createElement("div",{className:"root"},"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0435 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430"):l&&!n?r.a.createElement("div",{className:"root"},"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c pdf \u0444\u0430\u0439\u043b"):r.a.createElement("div",{className:"root"},n&&!u&&r.a.createElement("div",{className:"sandbox"},r.a.createElement("p",null,r.a.createElement("strong",null,"Sandbox")),r.a.createElement(R,{afterUploadAction:this.afterUpload,maxSizeInKB:1e9,accept:["application/pdf"],label:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 PDF \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442"})),s?r.a.createElement("div",{className:"wrap",ref:this.wrap},r.a.createElement("div",{className:"document",ref:this.document},r.a.createElement("canvas",{className:"canvas",ref:this.canvas}),r.a.createElement("div",{className:"textAndAnnotationLayer",ref:this.textAndAnnotationLayer}),r.a.createElement("div",{className:"controls"},r.a.createElement("div",{className:"leftControls"},f>1&&r.a.createElement(a.Fragment,null,r.a.createElement("div",{className:"previous",onClick:function(){return d?null:e.switchPageHandler()}}),r.a.createElement("div",{className:"next",onClick:function(){return d?null:e.switchPageHandler(!0)}})),r.a.createElement("div",{className:"pages"},"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 ",h," \u0438\u0437 ",f)),r.a.createElement("div",{className:"rightControls"},r.a.createElement("a",{className:"download",download:!0,href:p}),S.a.isEnabled&&!Object(L.a)("any").any&&r.a.createElement("div",{className:"fullscreen",onClick:this.toggleFullScreenHandler}))))):!n&&r.a.createElement("div",null,"\u0418\u0434\u0435\u0442 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430..."))}}]),t}(a.Component);o.a.render(r.a.createElement((function(){return r.a.createElement("main",null,r.a.createElement("h1",{className:"header"},"Sandbox - download your pdf to try viewer"),r.a.createElement(O,{sandbox:!0}),r.a.createElement("h1",{className:"header"},"PdfViewer React wrap component for Pdf.js library"),r.a.createElement(O,{src:"".concat("/PdfViewer-react-pdf.js","/test.pdf")}))}),null),document.getElementById("root"))},38:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=38},46:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=46}},[[131,1,2]]]);
//# sourceMappingURL=main.9792e537.chunk.js.map